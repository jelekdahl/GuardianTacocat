<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Ram's App: By Jon-Erik Ekdahl</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />

  <!-- Devicons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css" />

  <!-- Prism CSS -->
  <link rel="stylesheet" href="/css/prism.css" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/site.css" />

  <!-- Favicon -->
  <link rel="icon" href="/img/je_favicon.svg" type="image/svg+xml" />
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">
        <img class="me-2" src="/img/je_logo_only_dark.svg" height="30" />
        Smart Ram's App
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/app.html">The App</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/code.html">The Code</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/jelekdahl/GuardianTacocat" target="_blank"
              rel="noopener noreferrer">The Repo</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://jon-erik.dev/"
              target="_blank" rel="noopener noreferrer">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://commentlines.up.railway.app/"
              target="_blank" rel="noopener noreferrer">Blog</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container py-3">
    <h1 class="border-bottom border-2 border-dark">The Code</h1>

    <div class="my-3">
      <p class="h6">Click the headers below to hide/show the corresponding code excerpts.</p>
    </div>

    <div class="accordion accordion-flush" id="accordionCode">
      <!-- Function: getValues -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingGetValues">
          <button class="accordion-button code-header collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseGetValues" aria-expanded="true" aria-controls="collapseGetValues">
            Function: getValues
          </button>
        </h2>
        <div id="collapseGetValues" class="accordion-collapse collapse" aria-labelledby="headingGetValues">
          <div class="row container bg-light ms-0 mb-3 p-3 border border-1 border-dark-subtle">
            <div class="col-12 col-lg-8">
              <pre class="line-numbers">
                <code class="language-js">
                  function getValues(inputId, outputId) {
                    let toCheck = document.getElementById(inputId).value;
                    let results = checkForPalindrome(toCheck);
                    displayResults(results, outputId);
                  }
                </code>
              </pre>
            </div>

            <div class="col-12 col-lg-4">
              <p>
                This function receives IDs for the input and output elements, using
                the former to obtain the user's input value. The latter is used to
                output the results of the palindrome check done on the input.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Function: checkForPalindrome -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingCheckForPalindrome">
          <button class="accordion-button code-header collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseCheckForPalindrome" aria-expanded="true" aria-controls="collapseCheckForPalindrome">
            Function: checkForPalindrome
          </button>
        </h2>
        <div id="collapseCheckForPalindrome" class="accordion-collapse collapse" aria-labelledby="headingCheckForPalindrome">
          <div class="row container bg-light ms-0 mb-3 p-3 border border-1 border-dark-subtle">
            <div class="col-12 col-lg-8">
              <pre class="line-numbers">
                <code class="language-js">
                  function checkForPalindrome(toCheck) {
                    let results = {
                      inputEmpty: false,
                      onlyPunctWS: false,
                      isPalindrome: true,
                      reverse: null,
                    };
                  
                    if (!toCheck) {
                      results.inputEmpty = true;
                      results.isPalindrome = false;
                    } else {
                      let cleanString = toCheck.replace(/[^a-z0-9]/gi, '');
                  
                      if (!cleanString) {
                        results.onlyPunctWS = true;
                        results.isPalindrome = false;
                      } else {
                        cleanString = cleanString.toLowerCase();
                        let i = 0, j = cleanString.length - 1;
                        results.reverse = new Array(cleanString.length);
                  
                        while (results.isPalindrome && i < j) {
                          if (cleanString[i] != cleanString[j]) results.isPalindrome = false;
                          results.reverse[i] = cleanString[j];
                          results.reverse[j--] = cleanString[i++];
                        }
                  
                        while (i < j) {
                          results.reverse[i] = cleanString[j];
                          results.reverse[j--] = cleanString[i++];
                        }
                  
                        if (i == j) {
                          results.reverse[i] = cleanString[i];
                        }
                  
                        results.reverse = results.reverse.join('');
                      }
                    }
                  
                    return results;
                  }
                </code>
              </pre>
            </div>

            <div class="col-12 col-lg-4">
              <p>
                This function checks if the user's input is in fact a palindrome. All characters
                that aren't alphanumeric are neglected in the check, and uppercase letters are
                treated as equivalent to their lowercase counterparts. The return value is an
                object containing information related to the check: whether the input is a
                Palindrome, if the input was completely empty, if the input was lacking
                alphanumeric characters, and what the reverse of the input string is.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Function: displayResults -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingDisplayResults">
          <button class="accordion-button code-header collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseDisplayResults" aria-expanded="true" aria-controls="collapseDisplayResults">
            Function: displayResults
          </button>
        </h2>
        <div id="collapseDisplayResults" class="accordion-collapse collapse" aria-labelledby="headingDisplayResults">
          <div class="row container bg-light ms-0 mb-3 p-3 border border-1 border-dark-subtle">
            <div class="col-12 col-lg-8">
              <pre class="line-numbers">
                <code class="language-js">
                  function displayResults(results, outputId) {
                    let outputHTML;
                  
                    if (results.inputEmpty) {
                      outputHTML = "&lt;h3&gt;Oops, your entry was completely empty!&lt;/h3&gt;" + "&lt;hr&gt;"
                        + "&lt;p&gt;Enter a phrase that includes characters other than whitespace and punctuation&lt;/p&gt;"
                    } else if (results.onlyPunctWS) {
                      outputHTML = "&lt;h3&gt;Oops, your entry only has whitespace and punctuation!&lt;/h3&gt;" + "&lt;hr&gt;"
                        + "&lt;p&gt;Enter a phrase that includes other characters, like letters and numbers&lt;/p&gt;"
                    } else {
                      if (results.isPalindrome) {
                        outputHTML = "&lt;h3&gt;Well done! You entered a Palindrome!&lt;/h3&gt;" + "&lt;hr&gt;"
                          + `&lt;p&gt;Your phrase reversed is: ${results.reverse}&lt;/p&gt;`
                      } else {
                        outputHTML = "&lt;h3&gt;Too bad! You didn't enter a Palindrome...&lt;/h3&gt;" + "&lt;hr&gt;"
                          + `&lt;p&gt;Your phrase reversed is: ${results.reverse}&lt;/p&gt;`
                      }
                    }
                  
                    let output = document.getElementById(outputId);
                    output.innerHTML = outputHTML;
                    output.classList.remove('invisible');
                  
                    if (results.isPalindrome) {
                      output.classList.add('bg-success-subtle');
                      output.classList.remove('bg-danger-subtle');
                    } else {
                      output.classList.add('bg-danger-subtle');
                      output.classList.remove('bg-success-subtle');
                    }
                  }
                </code>
              </pre>
            </div>

            <div class="col-12 col-lg-4">
              <p>
                This function receives the returned object from <code>checkForPalindrome</code>
                and uses it to determine the output to display on the webpage. There are 4
                possible types of messages: if the input is empty, if it lacks alphanumeric characters,
                if it is not a palindrome, and if it is a palindrome. In the latter 2 cases, the
                reverse string is shown in the output. In the case where a palindrome is present,
                the output message has a green background. The background is red in all other cases.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="py-3 container-fluid">
    <div class="container">
      <div class="row row-cols-1 row-cols-lg-3 align-items-center gy-2">
        <div class="col text-center text-lg-start">
          &copy; 2023 Jon-Erik Ekdahl
        </div>
        <div class="col text-center">
          <a class="personal-link" href="https://jon-erik.dev/" target="_blank" rel="noopener noreferrer">
            <img src="/img/je_logo_name_dark.svg" height="50" />
          </a>
        </div>
        <div class="col text-center text-lg-end">
          <a href="https://www.linkedin.com/in/jelekdahl/" target="_blank" rel="noopener noreferrer">
            <i class="bi bi-linkedin"></i></a>
          <a href="https://github.com/jelekdahl" target="_blank" rel="noopener noreferrer">
            <i class="bi bi-github"></i></a>
          <a href="mailto:jelekdahl@gmail.com" target="_blank" rel="noopener noreferrer">
            <i class="bi bi-envelope-at-fill"></i></a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>

  <script src="/js/prism.js"></script>
  <script>
    Prism.plugins.NormalizeWhitespace.setDefaults({
      'remove-trailing': true,
      'remove-indent': true,
      'left-trim': true,
      'right-trim': true
    })
  </script>
</body>

</html>